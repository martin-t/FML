{"Top":[{"Function":{"name":"stack","parameters":["initial_size"],"body":{"Block":[{"Variable":{"name":"initial_size","value":{"Block":[{"Conditional":{"condition":{"CallMethod":{"object":{"AccessVariable":{"name":"initial_size"}},"name":">","arguments":[{"Integer":0}]}},"consequent":{"AccessVariable":{"name":"initial_size"}},"alternative":{"Integer":1}}}]}}},{"Object":{"extends":"Null","members":[{"Variable":{"name":"size","value":{"AccessVariable":{"name":"initial_size"}}}},{"Variable":{"name":"pointer","value":{"Integer":0}}},{"Variable":{"name":"values","value":{"Array":{"size":{"AccessVariable":{"name":"initial_size"}},"value":"Null"}}}},{"Function":{"name":"peek","parameters":[],"body":{"Block":[{"AccessArray":{"array":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"stack"}},"index":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"pointer"}}}}]}}},{"Function":{"name":"push","parameters":["value"],"body":{"Block":[{"Conditional":{"condition":{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"pointer"}},"name":"==","arguments":[{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"size"}}]}},"consequent":{"CallMethod":{"object":{"AccessVariable":{"name":"this"}},"name":"__expand","arguments":[]}},"alternative":"Null"}},{"AssignArray":{"array":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"values"}},"index":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"pointer"}},"value":{"AccessVariable":{"name":"value"}}}},{"AssignField":{"object":{"AccessVariable":{"name":"this"}},"field":"pointer","value":{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"pointer"}},"name":"+","arguments":[{"Integer":1}]}}}},{"AccessVariable":{"name":"value"}}]}}},{"Function":{"name":"pop","parameters":[],"body":{"Block":[{"Conditional":{"condition":{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"pointer"}},"name":"==","arguments":[{"Integer":0}]}},"consequent":{"Print":{"format":"Error: attempting to pop from an empty stack.\\n","arguments":[]}},"alternative":{"Block":[{"AssignField":{"object":{"AccessVariable":{"name":"this"}},"field":"pointer","value":{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"pointer"}},"name":"-","arguments":[{"Integer":1}]}}}},{"Variable":{"name":"value","value":{"AccessArray":{"array":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"values"}},"index":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"pointer"}}}}}},{"AssignArray":{"array":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"values"}},"index":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"pointer"}},"value":"Null"}},{"AccessVariable":{"name":"value"}}]}}}]}}},{"Function":{"name":"print_values","parameters":[],"body":{"Block":[{"Variable":{"name":"index","value":{"Integer":0}}},{"Print":{"format":"[","arguments":[]}},{"Loop":{"condition":{"CallMethod":{"object":{"AccessVariable":{"name":"index"}},"name":"<","arguments":[{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"size"}}]}},"body":{"Block":[{"Conditional":{"condition":{"CallMethod":{"object":{"AccessVariable":{"name":"index"}},"name":"!=","arguments":[{"Integer":0}]}},"consequent":{"Print":{"format":", ","arguments":[]}},"alternative":"Null"}},{"Conditional":{"condition":{"CallMethod":{"object":{"AccessVariable":{"name":"index"}},"name":"==","arguments":[{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"pointer"}},"name":"-","arguments":[{"Integer":1}]}}]}},"consequent":{"Print":{"format":"*","arguments":[]}},"alternative":"Null"}},{"Print":{"format":"~","arguments":[{"AccessArray":{"array":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"values"}},"index":{"AccessVariable":{"name":"index"}}}}]}},{"AssignVariable":{"name":"index","value":{"CallMethod":{"object":{"AccessVariable":{"name":"index"}},"name":"+","arguments":[{"Integer":1}]}}}}]}}},{"Print":{"format":"]\\n","arguments":[]}}]}}},{"Function":{"name":"__expand","parameters":[],"body":{"Block":[{"Variable":{"name":"old_values","value":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"values"}}}},{"Variable":{"name":"old_size","value":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"size"}}}},{"AssignField":{"object":{"AccessVariable":{"name":"this"}},"field":"size","value":{"CallMethod":{"object":{"Integer":2},"name":"*","arguments":[{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"size"}}]}}}},{"AssignField":{"object":{"AccessVariable":{"name":"this"}},"field":"values","value":{"Array":{"size":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"size"}},"value":"Null"}}}},{"Variable":{"name":"index","value":{"Integer":0}}},{"Loop":{"condition":{"CallMethod":{"object":{"AccessVariable":{"name":"index"}},"name":"<","arguments":[{"AccessVariable":{"name":"old_size"}}]}},"body":{"Block":[{"AssignArray":{"array":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"values"}},"index":{"AccessVariable":{"name":"index"}},"value":{"AccessArray":{"array":{"AccessVariable":{"name":"old_values"}},"index":{"AccessVariable":{"name":"index"}}}}}},{"AssignVariable":{"name":"index","value":{"CallMethod":{"object":{"AccessVariable":{"name":"index"}},"name":"+","arguments":[{"Integer":1}]}}}}]}}}]}}}]}}]}}},{"Variable":{"name":"s","value":{"CallFunction":{"name":"stack","arguments":[{"Integer":4}]}}}},{"Variable":{"name":"len","value":{"Integer":7}}},{"Block":[{"Variable":{"name":"i","value":{"Integer":0}}},{"Loop":{"condition":{"CallMethod":{"object":{"AccessVariable":{"name":"i"}},"name":"<","arguments":[{"AccessVariable":{"name":"len"}}]}},"body":{"Block":[{"Print":{"format":"push ~ => ","arguments":[{"CallMethod":{"object":{"AccessVariable":{"name":"s"}},"name":"push","arguments":[{"AccessVariable":{"name":"i"}}]}}]}},{"CallMethod":{"object":{"AccessVariable":{"name":"s"}},"name":"print_values","arguments":[]}},{"AssignVariable":{"name":"i","value":{"CallMethod":{"object":{"AccessVariable":{"name":"i"}},"name":"+","arguments":[{"Integer":1}]}}}}]}}}]},{"Block":[{"Variable":{"name":"i","value":{"Integer":0}}},{"Loop":{"condition":{"CallMethod":{"object":{"AccessVariable":{"name":"i"}},"name":"<","arguments":[{"CallMethod":{"object":{"AccessVariable":{"name":"len"}},"name":"+","arguments":[{"Integer":1}]}}]}},"body":{"Block":[{"Print":{"format":"pop ~ => ","arguments":[{"CallMethod":{"object":{"AccessVariable":{"name":"s"}},"name":"pop","arguments":[]}}]}},{"CallMethod":{"object":{"AccessVariable":{"name":"s"}},"name":"print_values","arguments":[]}},{"AssignVariable":{"name":"i","value":{"CallMethod":{"object":{"AccessVariable":{"name":"i"}},"name":"+","arguments":[{"Integer":1}]}}}}]}}}]}]}
