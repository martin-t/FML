{"Top":[{"Function":{"name":"chunky_array","parameters":["chunk_size","initializer"],"body":{"Object":{"extends":"Null","members":[{"Variable":{"name":"chunk_size","value":{"AccessVariable":{"name":"chunk_size"}}}},{"Variable":{"name":"values","value":{"Array":{"size":{"AccessVariable":{"name":"chunk_size"}},"value":{"AccessVariable":{"name":"initializer"}}}}}},{"Variable":{"name":"initializer","value":{"AccessVariable":{"name":"initializer"}}}},{"Variable":{"name":"next_chunk","value":"Null"}},{"Function":{"name":"get","parameters":["index"],"body":{"Block":[{"Conditional":{"condition":{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"chunk_size"}},"name":"<=","arguments":[{"AccessVariable":{"name":"index"}}]}},"consequent":{"CallMethod":{"object":{"AccessVariable":{"name":"this"}},"name":"get_from_next_chunk","arguments":[{"AccessVariable":{"name":"index"}}]}},"alternative":{"AccessArray":{"array":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"values"}},"index":{"AccessVariable":{"name":"index"}}}}}}]}}},{"Function":{"name":"get_from_next_chunk","parameters":["index"],"body":{"Block":[{"Conditional":{"condition":{"CallMethod":{"object":"Null","name":"==","arguments":[{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"next_chunk"}}]}},"consequent":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"initializer"}},"alternative":{"AccessArray":{"array":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"next_chunk"}},"index":{"CallMethod":{"object":{"AccessVariable":{"name":"index"}},"name":"-","arguments":[{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"chunk_size"}}]}}}}}}]}}},{"Function":{"name":"set","parameters":["index","value"],"body":{"Block":[{"Conditional":{"condition":{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"chunk_size"}},"name":"<=","arguments":[{"AccessVariable":{"name":"index"}}]}},"consequent":{"CallMethod":{"object":{"AccessVariable":{"name":"this"}},"name":"set_in_next_chunk","arguments":[{"AccessVariable":{"name":"index"}},{"AccessVariable":{"name":"value"}}]}},"alternative":{"AssignArray":{"array":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"values"}},"index":{"AccessVariable":{"name":"index"}},"value":{"AccessVariable":{"name":"value"}}}}}}]}}},{"Function":{"name":"set_in_next_chunk","parameters":["index","value"],"body":{"Block":[{"Conditional":{"condition":{"CallMethod":{"object":"Null","name":"==","arguments":[{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"next_chunk"}}]}},"consequent":{"AssignField":{"object":{"AccessVariable":{"name":"this"}},"field":"next_chunk","value":{"CallFunction":{"name":"chunky_array","arguments":[{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"chunk_size"}},{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"initializer"}}]}}}},"alternative":"Null"}},{"AssignArray":{"array":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"next_chunk"}},"index":{"CallMethod":{"object":{"AccessVariable":{"name":"index"}},"name":"-","arguments":[{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"chunk_size"}}]}},"value":{"AccessVariable":{"name":"value"}}}}]}}},{"Function":{"name":"count","parameters":["needle"],"body":{"Block":[{"Conditional":{"condition":{"CallMethod":{"object":{"AccessVariable":{"name":"needle"}},"name":"==","arguments":[{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"initializer"}}]}},"consequent":{"Print":{"format":"Warning! Counting values ~ which are used to populate empty elements.\\n","arguments":[{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"initializer"}}]}},"alternative":"Null"}},{"Variable":{"name":"counter","value":{"Object":{"extends":"Null","members":[{"Variable":{"name":"needle","value":{"AccessVariable":{"name":"needle"}}}},{"Variable":{"name":"count","value":{"Integer":0}}},{"Function":{"name":"apply","parameters":["index","value"],"body":{"Conditional":{"condition":{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"needle"}},"name":"==","arguments":[{"AccessVariable":{"name":"value"}}]}},"consequent":{"Block":[{"AssignField":{"object":{"AccessVariable":{"name":"this"}},"field":"count","value":{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"count"}},"name":"+","arguments":[{"Integer":1}]}}}},{"Boolean":true}]},"alternative":{"Boolean":false}}}}}]}}}},{"CallMethod":{"object":{"AccessVariable":{"name":"this"}},"name":"for_each","arguments":[{"AccessVariable":{"name":"counter"}}]}},{"AccessField":{"object":{"AccessVariable":{"name":"counter"}},"field":"count"}}]}}},{"Function":{"name":"find","parameters":["needle"],"body":{"Block":[{"Conditional":{"condition":{"CallMethod":{"object":{"AccessVariable":{"name":"needle"}},"name":"==","arguments":[{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"initializer"}}]}},"consequent":{"Print":{"format":"Warning! Looking for value ~ which is used to populate empty elements.\\n","arguments":[{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"initializer"}}]}},"alternative":"Null"}},{"Variable":{"name":"finder","value":{"Object":{"extends":"Null","members":[{"Variable":{"name":"needle","value":{"AccessVariable":{"name":"needle"}}}},{"Variable":{"name":"found_index","value":"Null"}},{"Function":{"name":"apply","parameters":["index","value"],"body":{"Conditional":{"condition":{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"needle"}},"name":"==","arguments":[{"AccessVariable":{"name":"value"}}]}},"consequent":{"Block":[{"AssignField":{"object":{"AccessVariable":{"name":"this"}},"field":"found_index","value":{"AccessVariable":{"name":"index"}}}},{"Boolean":true}]},"alternative":{"Boolean":false}}}}}]}}}},{"CallMethod":{"object":{"AccessVariable":{"name":"this"}},"name":"find_by_condition","arguments":[{"AccessVariable":{"name":"finder"}}]}},{"AccessField":{"object":{"AccessVariable":{"name":"finder"}},"field":"found_index"}}]}}},{"Function":{"name":"find_by_condition","parameters":["lambda"],"body":{"CallMethod":{"object":{"AccessVariable":{"name":"this"}},"name":"find_by_condition_with_offset","arguments":[{"Integer":0},{"AccessVariable":{"name":"lambda"}}]}}}},{"Function":{"name":"find_by_condition_with_offset","parameters":["index_offset","lambda"],"body":{"Block":[{"Variable":{"name":"i","value":{"Integer":0}}},{"Variable":{"name":"continue","value":{"Boolean":true}}},{"Variable":{"name":"found","value":{"Boolean":false}}},{"Loop":{"condition":{"AccessVariable":{"name":"continue"}},"body":{"Block":[{"AssignVariable":{"name":"found","value":{"CallMethod":{"object":{"AccessVariable":{"name":"lambda"}},"name":"apply","arguments":[{"CallMethod":{"object":{"AccessVariable":{"name":"index_offset"}},"name":"+","arguments":[{"AccessVariable":{"name":"i"}}]}},{"AccessArray":{"array":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"values"}},"index":{"AccessVariable":{"name":"i"}}}}]}}}},{"Conditional":{"condition":{"AccessVariable":{"name":"found"}},"consequent":{"AssignVariable":{"name":"continue","value":{"Boolean":false}}},"alternative":{"Conditional":{"condition":{"CallMethod":{"object":{"AccessVariable":{"name":"i"}},"name":"<","arguments":[{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"chunk_size"}},"name":"-","arguments":[{"Integer":1}]}}]}},"consequent":{"AssignVariable":{"name":"i","value":{"CallMethod":{"object":{"AccessVariable":{"name":"i"}},"name":"+","arguments":[{"Integer":1}]}}}},"alternative":{"AssignVariable":{"name":"continue","value":{"Boolean":false}}}}}}}]}}},{"Conditional":{"condition":{"CallMethod":{"object":{"CallMethod":{"object":{"Boolean":false},"name":"==","arguments":[{"AccessVariable":{"name":"found"}}]}},"name":"&","arguments":[{"CallMethod":{"object":"Null","name":"!=","arguments":[{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"next_chunk"}}]}}]}},"consequent":{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"next_chunk"}},"name":"find_by_condition_with_offset","arguments":[{"CallMethod":{"object":{"AccessVariable":{"name":"index_offset"}},"name":"+","arguments":[{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"chunk_size"}}]}},{"AccessVariable":{"name":"lambda"}}]}},"alternative":"Null"}}]}}},{"Function":{"name":"for_each","parameters":["lambda"],"body":{"CallMethod":{"object":{"AccessVariable":{"name":"this"}},"name":"for_each_with_offset","arguments":[{"Integer":0},{"AccessVariable":{"name":"lambda"}}]}}}},{"Function":{"name":"for_each_with_offset","parameters":["index_offset","lambda"],"body":{"Block":[{"Variable":{"name":"i","value":{"Integer":0}}},{"Loop":{"condition":{"CallMethod":{"object":{"AccessVariable":{"name":"i"}},"name":"<","arguments":[{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"chunk_size"}}]}},"body":{"Block":[{"CallMethod":{"object":{"AccessVariable":{"name":"lambda"}},"name":"apply","arguments":[{"CallMethod":{"object":{"AccessVariable":{"name":"index_offset"}},"name":"+","arguments":[{"AccessVariable":{"name":"i"}}]}},{"AccessArray":{"array":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"values"}},"index":{"AccessVariable":{"name":"i"}}}}]}},{"AssignVariable":{"name":"i","value":{"CallMethod":{"object":{"AccessVariable":{"name":"i"}},"name":"+","arguments":[{"Integer":1}]}}}}]}}},{"Conditional":{"condition":{"CallMethod":{"object":"Null","name":"!=","arguments":[{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"next_chunk"}}]}},"consequent":{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"next_chunk"}},"name":"for_each_with_offset","arguments":[{"CallMethod":{"object":{"AccessVariable":{"name":"index_offset"}},"name":"+","arguments":[{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"chunk_size"}}]}},{"AccessVariable":{"name":"lambda"}}]}},"alternative":"Null"}}]}}},{"Function":{"name":"print_all","parameters":[],"body":{"CallMethod":{"object":{"AccessVariable":{"name":"this"}},"name":"for_each","arguments":[{"Object":{"extends":"Null","members":[{"Function":{"name":"apply","parameters":["i","v"],"body":{"Print":{"format":"~: ~\\n","arguments":[{"AccessVariable":{"name":"i"}},{"AccessVariable":{"name":"v"}}]}}}}]}}]}}}}]}}}},{"Function":{"name":"chunky_map","parameters":["chunk_size","initializer"],"body":{"Object":{"extends":"Null","members":[{"Variable":{"name":"keys","value":{"CallFunction":{"name":"chunky_array","arguments":[{"AccessVariable":{"name":"chunk_size"}},"Null"]}}}},{"Variable":{"name":"values","value":{"CallFunction":{"name":"chunky_array","arguments":[{"AccessVariable":{"name":"chunk_size"}},{"AccessVariable":{"name":"initializer"}}]}}}},{"Variable":{"name":"next_entry","value":{"Integer":0}}},{"Function":{"name":"get","parameters":["key"],"body":{"Block":[{"Conditional":{"condition":{"CallMethod":{"object":{"AccessVariable":{"name":"key"}},"name":"==","arguments":["Null"]}},"consequent":{"Print":{"format":"Warning! Looking for null, but keys cannot be null.\\n","arguments":[]}},"alternative":"Null"}},{"Variable":{"name":"index","value":{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"keys"}},"name":"find","arguments":[{"AccessVariable":{"name":"key"}}]}}}},{"Conditional":{"condition":{"CallMethod":{"object":"Null","name":"==","arguments":[{"AccessVariable":{"name":"index"}}]}},"consequent":{"AccessField":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"values"}},"field":"initializer"}},"alternative":{"AccessArray":{"array":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"values"}},"index":{"AccessVariable":{"name":"index"}}}}}}]}}},{"Function":{"name":"set","parameters":["key","value"],"body":{"Block":[{"Conditional":{"condition":{"CallMethod":{"object":{"AccessVariable":{"name":"key"}},"name":"==","arguments":["Null"]}},"consequent":{"Print":{"format":"Warning! Looking for null, but keys cannot be null.\\n","arguments":[]}},"alternative":"Null"}},{"Variable":{"name":"index","value":{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"keys"}},"name":"find","arguments":[{"AccessVariable":{"name":"key"}}]}}}},{"Conditional":{"condition":{"CallMethod":{"object":"Null","name":"==","arguments":[{"AccessVariable":{"name":"index"}}]}},"consequent":{"Block":[{"AssignArray":{"array":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"keys"}},"index":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"next_entry"}},"value":{"AccessVariable":{"name":"key"}}}},{"Variable":{"name":"result","value":{"AssignArray":{"array":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"values"}},"index":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"next_entry"}},"value":{"AccessVariable":{"name":"value"}}}}}},{"AssignField":{"object":{"AccessVariable":{"name":"this"}},"field":"next_entry","value":{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"next_entry"}},"name":"+","arguments":[{"Integer":1}]}}}},{"AccessVariable":{"name":"result"}}]},"alternative":{"Block":[{"AssignArray":{"array":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"values"}},"index":{"AccessVariable":{"name":"index"}},"value":{"AccessVariable":{"name":"value"}}}}]}}}]}}},{"Function":{"name":"print_all","parameters":[],"body":{"Block":[{"Variable":{"name":"printer","value":{"Object":{"extends":"Null","members":[{"Variable":{"name":"map","value":{"AccessVariable":{"name":"this"}}}},{"Function":{"name":"apply","parameters":["i","key"],"body":{"Conditional":{"condition":{"CallMethod":{"object":{"AccessVariable":{"name":"i"}},"name":"<","arguments":[{"AccessField":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"map"}},"field":"next_entry"}}]}},"consequent":{"Print":{"format":"~: ~\\n","arguments":[{"AccessVariable":{"name":"key"}},{"AccessArray":{"array":{"AccessField":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"map"}},"field":"values"}},"index":{"AccessVariable":{"name":"i"}}}}]}},"alternative":"Null"}}}}]}}}},{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"keys"}},"name":"for_each","arguments":[{"AccessVariable":{"name":"printer"}}]}}]}}}]}}}},{"Variable":{"name":"WHITE","value":{"Object":{"extends":"Null","members":[{"Variable":{"name":"black","value":{"Boolean":false}}},{"Function":{"name":"flip","parameters":[],"body":{"AccessVariable":{"name":"BLACK"}}}},{"Function":{"name":"is_black","parameters":[],"body":{"Boolean":false}}},{"Function":{"name":"is_white","parameters":[],"body":{"Boolean":true}}},{"Function":{"name":"draw","parameters":[],"body":{"Print":{"format":".","arguments":[]}}}}]}}}},{"Variable":{"name":"BLACK","value":{"Object":{"extends":"Null","members":[{"Variable":{"name":"black","value":{"Boolean":true}}},{"Function":{"name":"flip","parameters":[],"body":{"AccessVariable":{"name":"WHITE"}}}},{"Function":{"name":"is_black","parameters":[],"body":{"Boolean":true}}},{"Function":{"name":"is_white","parameters":[],"body":{"Boolean":false}}},{"Function":{"name":"draw","parameters":[],"body":{"Print":{"format":"#","arguments":[]}}}}]}}}},{"Variable":{"name":"UP","value":{"Object":{"extends":"Null","members":[{"Variable":{"name":"x","value":{"Integer":0}}},{"Variable":{"name":"y","value":{"Integer":1}}},{"Function":{"name":"turn_clockwise","parameters":[],"body":{"AccessVariable":{"name":"RIGHT"}}}},{"Function":{"name":"turn_counter_clockwise","parameters":[],"body":{"AccessVariable":{"name":"LEFT"}}}},{"Function":{"name":"draw","parameters":[],"body":{"Print":{"format":"^","arguments":[]}}}}]}}}},{"Variable":{"name":"DOWN","value":{"Object":{"extends":"Null","members":[{"Variable":{"name":"x","value":{"Integer":0}}},{"Variable":{"name":"y","value":{"Integer":-1}}},{"Function":{"name":"turn_clockwise","parameters":[],"body":{"AccessVariable":{"name":"LEFT"}}}},{"Function":{"name":"turn_counter_clockwise","parameters":[],"body":{"AccessVariable":{"name":"RIGHT"}}}},{"Function":{"name":"draw","parameters":[],"body":{"Print":{"format":"v","arguments":[]}}}}]}}}},{"Variable":{"name":"LEFT","value":{"Object":{"extends":"Null","members":[{"Variable":{"name":"x","value":{"Integer":-1}}},{"Variable":{"name":"y","value":{"Integer":0}}},{"Function":{"name":"turn_clockwise","parameters":[],"body":{"AccessVariable":{"name":"UP"}}}},{"Function":{"name":"turn_counter_clockwise","parameters":[],"body":{"AccessVariable":{"name":"DOWN"}}}},{"Function":{"name":"draw","parameters":[],"body":{"Print":{"format":"<","arguments":[]}}}}]}}}},{"Variable":{"name":"RIGHT","value":{"Object":{"extends":"Null","members":[{"Variable":{"name":"x","value":{"Integer":1}}},{"Variable":{"name":"y","value":{"Integer":0}}},{"Function":{"name":"turn_clockwise","parameters":[],"body":{"AccessVariable":{"name":"DOWN"}}}},{"Function":{"name":"turn_counter_clockwise","parameters":[],"body":{"AccessVariable":{"name":"UP"}}}},{"Function":{"name":"draw","parameters":[],"body":{"Print":{"format":">","arguments":[]}}}}]}}}},{"Function":{"name":"coordinates","parameters":["x","y"],"body":{"Object":{"extends":"Null","members":[{"Variable":{"name":"x","value":{"AccessVariable":{"name":"x"}}}},{"Variable":{"name":"y","value":{"AccessVariable":{"name":"y"}}}},{"Function":{"name":"move_in_direction","parameters":["direction"],"body":{"CallFunction":{"name":"coordinates","arguments":[{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"x"}},"name":"+","arguments":[{"AccessField":{"object":{"AccessVariable":{"name":"direction"}},"field":"x"}}]}},{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"y"}},"name":"+","arguments":[{"AccessField":{"object":{"AccessVariable":{"name":"direction"}},"field":"y"}}]}}]}}}},{"Function":{"name":"==","parameters":["other"],"body":{"Conditional":{"condition":{"CallMethod":{"object":{"AccessVariable":{"name":"other"}},"name":"==","arguments":["Null"]}},"consequent":{"Boolean":false},"alternative":{"CallMethod":{"object":{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"y"}},"name":"==","arguments":[{"AccessField":{"object":{"AccessVariable":{"name":"other"}},"field":"y"}}]}},"name":"&","arguments":[{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"x"}},"name":"==","arguments":[{"AccessField":{"object":{"AccessVariable":{"name":"other"}},"field":"x"}}]}}]}}}}}},{"Function":{"name":"!=","parameters":["other"],"body":{"Conditional":{"condition":{"CallMethod":{"object":{"AccessVariable":{"name":"other"}},"name":"==","arguments":["Null"]}},"consequent":{"Boolean":true},"alternative":{"CallMethod":{"object":{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"y"}},"name":"!=","arguments":[{"AccessField":{"object":{"AccessVariable":{"name":"other"}},"field":"y"}}]}},"name":"&","arguments":[{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"x"}},"name":"!=","arguments":[{"AccessField":{"object":{"AccessVariable":{"name":"other"}},"field":"x"}}]}}]}}}}}}]}}}},{"Function":{"name":"ant","parameters":["initial_position","initial_direction"],"body":{"Object":{"extends":"Null","members":[{"Variable":{"name":"direction","value":{"AccessVariable":{"name":"initial_direction"}}}},{"Variable":{"name":"position","value":{"AccessVariable":{"name":"initial_position"}}}},{"Function":{"name":"step","parameters":["color"],"body":{"Block":[{"AssignField":{"object":{"AccessVariable":{"name":"this"}},"field":"direction","value":{"Conditional":{"condition":{"CallMethod":{"object":{"AccessVariable":{"name":"color"}},"name":"is_black","arguments":[]}},"consequent":{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"direction"}},"name":"turn_counter_clockwise","arguments":[]}},"alternative":{"Conditional":{"condition":{"CallMethod":{"object":{"AccessVariable":{"name":"color"}},"name":"is_white","arguments":[]}},"consequent":{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"direction"}},"name":"turn_clockwise","arguments":[]}},"alternative":{"Print":{"format":"Error: Unknown color: ~. Should be ~ or ~.","arguments":[{"AccessVariable":{"name":"color"}},{"AccessVariable":{"name":"BLACK"}},{"AccessVariable":{"name":"WHITE"}}]}}}}}}}},{"AssignField":{"object":{"AccessVariable":{"name":"this"}},"field":"position","value":{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"position"}},"name":"move_in_direction","arguments":[{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"direction"}}]}}}},{"CallMethod":{"object":{"AccessVariable":{"name":"color"}},"name":"flip","arguments":[]}}]}}},{"Function":{"name":"draw","parameters":[],"body":{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"direction"}},"name":"draw","arguments":[]}}}}]}}}},{"Variable":{"name":"game","value":{"Object":{"extends":"Null","members":[{"Variable":{"name":"ant","value":{"CallFunction":{"name":"ant","arguments":[{"CallFunction":{"name":"coordinates","arguments":[{"Integer":0},{"Integer":0}]}},{"AccessVariable":{"name":"UP"}}]}}}},{"Variable":{"name":"world","value":{"CallFunction":{"name":"chunky_map","arguments":[{"Integer":100},{"AccessVariable":{"name":"WHITE"}}]}}}},{"Function":{"name":"move","parameters":[],"body":{"AssignArray":{"array":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"world"}},"index":{"AccessField":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"ant"}},"field":"position"}},"value":{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"ant"}},"name":"step","arguments":[{"AccessArray":{"array":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"world"}},"index":{"AccessField":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"ant"}},"field":"position"}}}}]}}}}}},{"Function":{"name":"draw","parameters":[],"body":{"Block":[{"Variable":{"name":"boundary_finder","value":{"Object":{"extends":"Null","members":[{"Variable":{"name":"min_x","value":{"AccessField":{"object":{"AccessField":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"ant"}},"field":"position"}},"field":"x"}}}},{"Variable":{"name":"min_y","value":{"AccessField":{"object":{"AccessField":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"ant"}},"field":"position"}},"field":"y"}}}},{"Variable":{"name":"max_x","value":{"AccessField":{"object":{"AccessField":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"ant"}},"field":"position"}},"field":"x"}}}},{"Variable":{"name":"max_y","value":{"AccessField":{"object":{"AccessField":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"ant"}},"field":"position"}},"field":"y"}}}},{"Function":{"name":"apply","parameters":["_","coordinates"],"body":{"Block":[{"Conditional":{"condition":{"CallMethod":{"object":{"AccessVariable":{"name":"coordinates"}},"name":"!=","arguments":["Null"]}},"consequent":{"Block":[{"Conditional":{"condition":{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"coordinates"}},"field":"x"}},"name":"<","arguments":[{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"min_x"}}]}},"consequent":{"AssignField":{"object":{"AccessVariable":{"name":"this"}},"field":"min_x","value":{"AccessField":{"object":{"AccessVariable":{"name":"coordinates"}},"field":"x"}}}},"alternative":"Null"}},{"Conditional":{"condition":{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"coordinates"}},"field":"x"}},"name":">","arguments":[{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"max_x"}}]}},"consequent":{"AssignField":{"object":{"AccessVariable":{"name":"this"}},"field":"max_x","value":{"AccessField":{"object":{"AccessVariable":{"name":"coordinates"}},"field":"x"}}}},"alternative":"Null"}},{"Conditional":{"condition":{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"coordinates"}},"field":"y"}},"name":"<","arguments":[{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"min_y"}}]}},"consequent":{"AssignField":{"object":{"AccessVariable":{"name":"this"}},"field":"min_y","value":{"AccessField":{"object":{"AccessVariable":{"name":"coordinates"}},"field":"y"}}}},"alternative":"Null"}},{"Conditional":{"condition":{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"coordinates"}},"field":"y"}},"name":">","arguments":[{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"max_y"}}]}},"consequent":{"AssignField":{"object":{"AccessVariable":{"name":"this"}},"field":"max_y","value":{"AccessField":{"object":{"AccessVariable":{"name":"coordinates"}},"field":"y"}}}},"alternative":"Null"}}]},"alternative":"Null"}}]}}}]}}}},{"CallMethod":{"object":{"AccessField":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"world"}},"field":"keys"}},"name":"for_each","arguments":[{"AccessVariable":{"name":"boundary_finder"}}]}},{"Variable":{"name":"y","value":{"AccessField":{"object":{"AccessVariable":{"name":"boundary_finder"}},"field":"max_y"}}}},{"Loop":{"condition":{"CallMethod":{"object":{"AccessVariable":{"name":"y"}},"name":">=","arguments":[{"AccessField":{"object":{"AccessVariable":{"name":"boundary_finder"}},"field":"min_y"}}]}},"body":{"Block":[{"Variable":{"name":"x","value":{"AccessField":{"object":{"AccessVariable":{"name":"boundary_finder"}},"field":"min_x"}}}},{"Loop":{"condition":{"CallMethod":{"object":{"AccessVariable":{"name":"x"}},"name":"<=","arguments":[{"AccessField":{"object":{"AccessVariable":{"name":"boundary_finder"}},"field":"max_x"}}]}},"body":{"Block":[{"Variable":{"name":"position","value":{"CallFunction":{"name":"coordinates","arguments":[{"AccessVariable":{"name":"x"}},{"AccessVariable":{"name":"y"}}]}}}},{"Conditional":{"condition":{"CallMethod":{"object":{"AccessVariable":{"name":"position"}},"name":"==","arguments":[{"AccessField":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"ant"}},"field":"position"}}]}},"consequent":{"CallMethod":{"object":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"ant"}},"name":"draw","arguments":[]}},"alternative":{"CallMethod":{"object":{"AccessArray":{"array":{"AccessField":{"object":{"AccessVariable":{"name":"this"}},"field":"world"}},"index":{"AccessVariable":{"name":"position"}}}},"name":"draw","arguments":[]}}}},{"AssignVariable":{"name":"x","value":{"CallMethod":{"object":{"AccessVariable":{"name":"x"}},"name":"+","arguments":[{"Integer":1}]}}}}]}}},{"Print":{"format":"\\n","arguments":[]}},{"AssignVariable":{"name":"y","value":{"CallMethod":{"object":{"AccessVariable":{"name":"y"}},"name":"-","arguments":[{"Integer":1}]}}}}]}}},{"Print":{"format":"\\n","arguments":[]}}]}}}]}}}},{"Block":[{"Variable":{"name":"turn","value":{"Integer":0}}},{"Loop":{"condition":{"CallMethod":{"object":{"AccessVariable":{"name":"turn"}},"name":"<=","arguments":[{"Integer":200}]}},"body":{"Block":[{"Print":{"format":"turn ~\\n","arguments":[{"AccessVariable":{"name":"turn"}}]}},{"CallMethod":{"object":{"AccessVariable":{"name":"game"}},"name":"move","arguments":[]}},{"CallMethod":{"object":{"AccessVariable":{"name":"game"}},"name":"draw","arguments":[]}},{"AssignVariable":{"name":"turn","value":{"CallMethod":{"object":{"AccessVariable":{"name":"turn"}},"name":"+","arguments":[{"Integer":1}]}}}}]}}}]}]}
